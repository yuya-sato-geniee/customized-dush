{"version":3,"file":"dush.umd.js","sources":["../src/index.js"],"sourcesContent":["/*!\n * dush <https://github.com/tunnckoCore/dush>\n *\n * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)\n * Released under the MIT license.\n */\n\n'use strict'\n\nexport default function () {\n  let _allEvents = Object.create(null)\n  let _calledEvents = Object.create(null)\n\n  const app = {\n    _allEvents,\n    _calledEvents,\n\n    once (name, handler, fireImmediately) {\n      let e = app._allEvents[name] || (app._allEvents[name] = [])\n\n      function fn () {\n        if (!fn.called) {\n          handler.apply(handler, arguments)\n          fn.called = true\n        }\n      }\n\n      e.push(fn)\n\n      if (fireImmediately && app._calledEvents[name]) {\n        fn.apply(null, app._calledEvents[name])\n      }\n      return app\n    },\n\n    emit (name) {\n      var args = [].slice.call(arguments).slice(1)\n      app._calledEvents[name] = args\n      ;(app._allEvents[name] || []).map((handler) => {\n        handler.apply(handler, args)\n      })\n\n      return app\n    }\n  }\n\n  return app\n}\n"],"names":["let","app","_allEvents","Object","create","_calledEvents","once","name","handler","fireImmediately","fn","called","apply","arguments","push","emit","args","slice","call","map"],"mappings":"uLASe,WACbA,IAGMC,GACJC,WAJeC,OAAOC,OAAO,MAK7BC,cAJkBF,OAAOC,OAAO,MAMhCE,cAAMC,EAAMC,EAASC,GAGnB,SAASC,IACFA,EAAGC,SACNH,EAAQI,MAAMJ,EAASK,WACvBH,EAAGC,QAAS,GAShB,OAdQV,EAAIC,WAAWK,KAAUN,EAAIC,WAAWK,QAS9CO,KAAKJ,GAEHD,GAAmBR,EAAII,cAAcE,IACvCG,EAAGE,MAAM,KAAMX,EAAII,cAAcE,IAE5BN,GAGTc,cAAMR,GACJ,IAAIS,KAAUC,MAAMC,KAAKL,WAAWI,MAAM,GAM1C,OALAhB,EAAII,cAAcE,GAAQS,GACxBf,EAAIC,WAAWK,QAAaY,IAAI,SAACX,GACjCA,EAAQI,MAAMJ,EAASQ,KAGlBf,IAIX,OAAOA"}